# æ‹“æ‰‘æ’åº topological sorting

ç»´åŸºç™¾ç§‘å®šä¹‰å¦‚ä¸‹ï¼š

> æœ‰å‘å›¾çš„æ‹“æ‰‘æ’åºæ˜¯å¯¹å…¶é¡¶ç‚¹çš„ä¸€ç§çº¿æ€§æ’åºï¼Œä½¿å¾—å¯¹äºä»é¡¶ç‚¹ u åˆ°é¡¶ç‚¹ vçš„æ¯ä¸ªæœ‰å‘è¾¹ uvï¼Œu åœ¨æ’åºä¸­éƒ½åœ¨ v ä¹‹å‰ã€‚

> å½“ä¸”ä»…å½“å›¾ä¸­æ²¡æœ‰å®šå‘ç¯æ—¶ï¼ˆå³æœ‰å‘æ— ç¯å›¾ï¼ŒDirected acyclic graph (DAG)ï¼‰ï¼Œæ‰æœ‰å¯èƒ½è¿›è¡Œæ‹“æ‰‘æ’åºã€‚

æ‹“æ‰‘æ’åºå¸¸ç”¨æ¥è§£å†³æœ‰å‘å›¾ä¸­çš„**ä¾èµ–è§£æï¼ˆdependency resolutionï¼‰**é—®é¢˜

åœ¨å›¾è®ºä¸­ï¼Œç”±ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾çš„é¡¶ç‚¹ç»„æˆçš„åºåˆ—ï¼Œå½“ä¸”ä»…å½“æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œæ‰èƒ½ç§°ä¸ºè¯¥å›¾çš„ä¸€ä¸ªæ‹“æ‰‘æ’åº:
1. åºåˆ—ä¸­åŒ…å«æ¯ä¸ªé¡¶ç‚¹ï¼Œä¸”æ¯ä¸ªé¡¶ç‚¹åªå‡ºç°ä¸€æ¬¡ã€‚
2. è‹¥Aåœ¨åºåˆ—ä¸­æ’åœ¨Bçš„å‰é¢ï¼Œåˆ™åœ¨å›¾ä¸­ä¸å­˜åœ¨ä»Båˆ°Açš„è·¯å¾„ã€‚

## ç®—æ³•ä¸å®ç°

![ğŸŒ°](/assets/æ‹“æ‰‘ä¾‹å­.png)

ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œä¸€ä¸ªæ‹“æ‰‘æ’åºçš„æ­¥éª¤å¤§ä½“å¦‚ä¸‹ï¼š
1. æ”¶é›†å…¥åº¦ä¸º0çš„é¡¶ç‚¹ï¼Œä»¥è¿™äº›é¡¶ç‚¹å¼€å§‹éå†
2. é€‰æ‹©ä¸€ä¸ªå…¥åº¦ä¸º0é¡¶ç‚¹ï¼Œåˆ é™¤è¯¥é¡¶ç‚¹å’Œæ‰€æœ‰ä»¥å®ƒä¸ºèµ·ç‚¹çš„æœ‰å‘è¾¹ï¼ˆå³å…¥åº¦å‡1ï¼‰
3. é‡å¤2æ­¥éª¤ï¼Œç›´åˆ°å…¥åº¦ä¸º0çš„é¡¶ç‚¹ä¸ºç©ºã€‚

[1,2,3,4,5] æ˜¯å…¶ä¸­ä¸€ç§æ‹“æ‰‘æ’åºç»“æœã€‚

### ä»¥ è¯¾ç¨‹è¡¨II ä¸ºä¾‹
```js
var findOrder = function (numCourses, prerequisites) {
  const order = [] // å­˜æ”¾æ’åºç»“æœ
  const queue = [] // å…¥åº¦ä¸º0çš„é¡¶ç‚¹é˜Ÿåˆ—
  const graph = new Map() // å›¾,è¾¹ v -> [e]
  const indegree = new Array(numCourses).fill(0)
  // æ„å»ºå›¾
  for (const [e, v] of prerequisites) {
    // v -> e
    if (graph.has(v)) {
      graph.get(v).push(e)
    } else {
      graph.set(v, [e])
    }
    indegree[e] += 1
  }
  // æœç´¢æ‰€æœ‰å…¥åº¦ä¸º0çš„é¡¶ç‚¹
  for (let i = 0; i < indegree.length; i++) {
    if (indegree[i] === 0) {
      queue.push(i)
    }
  }
  while (queue.length) {
    // å–å‡ºå…¥åº¦ä¸º0çš„é¡¶ç‚¹
    const v = queue.shift()
    if (graph.has(v)) {
      // å°†æ‰€æœ‰væŒ‡å‘çš„é¡¶ç‚¹çš„å…¥åº¦å‡1ï¼Œå¹¶å°†å…¥åº¦ä¸º0çš„é¡¶ç‚¹å…¥é˜Ÿ
      for (const e of graph.get(v)) {
        indegree[e] -= 1
        if (indegree[e] === 0) {
          queue.push(e)
        }
      }
    }
    // è¾“å‡ºæ­¤é¡¶ç‚¹
    order.push(v)
  }
  // å¦‚æœé•¿åº¦ä¸ç­‰ï¼Œè¯´æ˜æœ‰å‘å›¾æœ‰å›è·¯
  return order.length === numCourses ? order : []
}
```



## æ€»ç»“

æ‹“æ‰‘æ’åºæ˜¯å¯¹æœ‰å‘æ— ç¯å›¾çš„ä¸€ç§çº¿æ€§æ’åºï¼Œå¸¸ç”¨æ¥è§£å†³æœ‰å‘å›¾ä¸­ä¾èµ–è§£æé—®é¢˜ã€‚

## ç›¸å…³é¢˜ç›®
* https://leetcode.com/problems/course-schedule/description/
* https://leetcode.com/problems/course-schedule-ii/description/
## å‚è€ƒèµ„æ–™
* [wiki](https://zh.wikipedia.org/wiki/%E6%8B%93%E6%92%B2%E6%8E%92%E5%BA%8F)